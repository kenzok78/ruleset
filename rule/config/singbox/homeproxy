config homeproxy 'infra'
	option __warning 'DO NOT EDIT THIS SECTION, OR YOU ARE ON YOUR OWN!'
	option common_port '22,53,80,143,443,465,853,873,993,995,8080,8443,9418'
	option mixed_port '5330'
	option redirect_port '5331'
	option tproxy_port '5332'
	option dns_port '5333'
	option china_dns_port '5334'
	option tun_name 'singtun0'
	option tun_addr4 '172.19.0.1/30'
	option tun_addr6 'fdfe:dcba:9876::1/126'
	option tun_mtu '9000'
	option table_mark '100'
	option self_mark '100'
	option tproxy_mark '101'
	option tun_mark '102'

config homeproxy 'config'
	option routing_mode 'custom'
	option routing_port 'common'
	option proxy_mode 'redirect_tproxy'
	option ipv6_support '0'

config homeproxy 'experimental'
	option clash_api_port '9090'
	option clash_api_log_level 'warn'
	option clash_api_enabled '1'
	option dashboard_repo 'metacubex/metacubexd'
	option set_dash_backend '1'

config homeproxy 'control'
	option lan_proxy_mode 'disabled'
	list wan_proxy_ipv4_ips '91.105.192.0/23'
	list wan_proxy_ipv4_ips '91.108.4.0/22'
	list wan_proxy_ipv4_ips '91.108.8.0/22'
	list wan_proxy_ipv4_ips '91.108.16.0/22'
	list wan_proxy_ipv4_ips '91.108.12.0/22'
	list wan_proxy_ipv4_ips '91.108.20.0/22'
	list wan_proxy_ipv4_ips '91.108.56.0/22'
	list wan_proxy_ipv4_ips '149.154.160.0/20'
	list wan_proxy_ipv4_ips '185.76.151.0/24'

config homeproxy 'routing'
	option sniff_override '1'
	option default_outbound 'nil'
	option bypass_cn_traffic '0'

config homeproxy 'dns'
	option dns_strategy 'prefer_ipv4'
	option default_server 'local_dns'
	option default_strategy 'ipv4_only'
	option disable_cache '1'

config homeproxy 'subscription'
	option auto_update '0'
	option allow_insecure '0'
	option packet_encoding 'xudp'
	option update_via_proxy '0'
	option filter_nodes 'blacklist'
	list filter_keywords '重置|到期|过期|剩余|套餐'
	list filter_keywords 'Expiration|Remaining|Traffic|Expire'

config homeproxy 'server'
	option enabled '0'
	option auto_firewall '0'

config dns_rule 'nodes_domain'
	option label 'NodesDomain'
	option enabled '1'
	option mode 'default'
	list outbound 'any-out'
	option server 'local_dns'

config routing_node 'node_selector'
	option label '节点选择'
	option enabled '1'
	option node 'node_selector'

config routing_node 'youtube_proxy'
	option label 'YouTube'
	option enabled '1'
	option node 'youtube_selector'

config routing_node 'openai_proxy'
	option label 'OpenAI'
	option enabled '1'
	option node 'openai_selector'

config routing_node 'google_proxy'
	option label 'Google'
	option enabled '1'
	option node 'google_selector'

config routing_node 'telegram_proxy'
	option label 'Telegram'
	option enabled '1'
	option node 'telegram_selector'

config routing_node 'tiktok_proxy'
	option label 'TikTok'
	option enabled '1'
	option node 'tiktok_selector'

config routing_node 'global_proxy'
	option label 'GLOBAL'
	option enabled '1'
	option node 'node_selector'

config routing_node 'netflix_proxy'
	option label 'Netflix'
	option enabled '1'
	option node 'netflix_selector'

config routing_node 'microsoft_proxy'
	option label 'Microsoft'
	option enabled '1'
	option node 'microsoft_selector'

config routing_node 'apple_proxy'
	option label 'Apple'
	option enabled '1'
	option node 'apple_selector'

config routing_node 'manual'
	option label '手动切换'
	option type 'selector'
	option filter_nodes 'blacklist'
	list filter_keywords '重置|到期|过期|剩余|套餐'
	list group 'main_subscription_group'

config node 'hk'
	option label '香港节点'
	option type 'selector'
	option filter_nodes 'whitelist'
	list filter_keywords '|HK|hk|香港|港|HongKong'
	list group 'main_subscription_group'

config node 'jp'
	option label '日本节点'
	option type 'selector'
	option filter_nodes 'whitelist'
	list filter_keywords '|JP|jp|日本|日|Japan'
	list group 'main_subscription_group'

config node 'us'
	option label '美国节点'
	option type 'selector'
	option filter_nodes 'whitelist'
	list filter_keywords '|US|us|美国|美|United States'
	list group 'main_subscription_group'

config node 'hk_auto'
	option label '香港自动'
	option type 'urltest'
	option filter_nodes 'whitelist'
	list filter_keywords '|HK|hk|香港|港|HongKong'
	option interval '10m'
	option idle_timeout '30m'

config node 'auto'
	option label '自动选择'
	option type 'urltest'
	option interval '10m'
	option idle_timeout '30m'

config node 'direct'
	option label '全球直连'
	option type 'direct'

config routing_rule 'youtube_routing'
	option label 'clash_mode:direct'
	option enabled '1'
	option mode 'default'
	option clash_mode 'direct'
	option outbound 'direct-out'

config routing_rule 'telegram_routing'
	option label 'clash_mode:global'
	option enabled '1'
	option mode 'default'
	option clash_mode 'global'
	option outbound 'node_selector'

config routing_rule 'tiktok_routing'
	option label 'geosite-openai'
	option enabled '1'
	option mode 'default'
	list rule_set 'openai_rules'
	option outbound 'openai_selector'

config routing_rule 'netflix_routing'
	option label 'geosite-youtube'
	option enabled '1'
	option mode 'default'
	list rule_set 'youtube_rules'
	option outbound 'youtube_selector'

config routing_rule 'apple_routing'
	option label 'geoip-google, geosite-google'
	option enabled '1'
	option mode 'default'
	list rule_set 'google_ip_rules'
	list rule_set 'google_site_rules'
	option outbound 'google_selector'

config routing_rule 'microsoft_routing'
	option label 'geoip-telegram,geosite-telegram'
	option enabled '1'
	option mode 'default'
	list rule_set 'telegram_ip_rules'
	list rule_set 'telegram_site_rules'
	option outbound 'telegram_selector'

config routing_rule 'non_cn_routing'
	option label 'geosite-tiktok'
	option enabled '1'
	option mode 'default'
	list rule_set 'tiktok_rules'
	option outbound 'tiktok_selector'

config routing_rule 'cn_routing'
	option label 'geoip-netflix,geosite-netflix'
	option enabled '1'
	option mode 'default'
	list rule_set 'netflix_ip_rules'
	list rule_set 'netflix_site_rules'
	option outbound 'netflix_selector'

config routing_rule 'geoip_apple_routing'
	option label 'geoip-apple,geosite-apple'
	option enabled '1'
	option mode 'default'
	list rule_set 'apple_ip_rules'
	list rule_set 'apple_site_rules'
	option outbound 'apple_selector'

config routing_rule 'geosite_microsoft_routing'
	option label 'geosite-microsoft'
	option enabled '1'
	option mode 'default'
	list rule_set 'microsoft_rules'
	option outbound 'microsoft_selector'

config routing_rule 'geolocation_not_cn_routing'
	option label 'geosite-geolocation-!cn'
	option enabled '1'
	option mode 'default'
	list rule_set 'geolocation_not_cn_rules'
	option outbound 'node_selector'

config routing_rule 'geoip_cn_routing'
	option label 'geoip-cn, geosite-cn'
	option enabled '1'
	option mode 'default'
	list rule_set 'geoip_cn_rules'
	list rule_set 'geosite_cn_rules'
	option outbound 'direct-out'

config dns_server 'local_dns'
	option label 'LocalDNS'
	option enabled '1'
	option address '119.29.29.29'
	option detour 'direct-out'

config dns_server 'proxy_dns'
	option label 'ProxyDNS'
	option enabled '1'
	option address 'tls://8.8.8.8'
	option detour 'proxy-out'

config dns_rule 'cn_domain'
	option label 'geosite-cn'
	option enabled '1'
	option mode 'default'
	list rule_set 'geosite_cn_rules'
	option server 'local_dns'
	option dns_disable_cache '1'

config dns_rule 'global_domain'
	option label 'geosite-geolocation-!cn'
	option enabled '1'
	option mode 'default'
	list rule_set 'geolocation_not_cn_rules'
	option server 'proxy_dns'
	option dns_disable_cache '1'

config ruleset 'openai_rules'
	option label 'geosite-openai'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/sing/geo-lite/geosite/openai.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'youtube_rules'
	option label 'geosite-youtube'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/youtube.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'google_ip_rules'
	option label 'geoip-google'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/google.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'google_site_rules'
	option label 'geosite-google'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/google.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'github_rules'
	option label 'geosite-github'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/github.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'telegram_ip_rules'
	option label 'geoip-telegram'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/telegram.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'telegram_site_rules'
	option label 'geosite-telegram'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/telegram.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'tiktok_rules'
	option label 'geosite-tiktok'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/tiktok.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'netflix_ip_rules'
	option label 'geoip-netflix'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/netflix.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'netflix_site_rules'
	option label 'geosite-netflix'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/netflix.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'apple_ip_rules'
	option label 'geoip-apple'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo-lite/geoip/apple.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'apple_site_rules'
	option label 'geosite-apple'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/apple.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'microsoft_rules'
	option label 'geosite-microsoft'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/microsoft.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'geolocation_not_cn_rules'
	option label 'geosite-geolocation-!cn'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/geolocation-!cn.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'geoip_cn_rules'
	option label 'geoip-cn'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/cn.srs'
	option enabled '1'
	option outbound 'direct-out'

config ruleset 'geosite_cn_rules'
	option label 'geosite-cn'
	option type 'remote'
	option format 'binary'
	option url 'https://ghp.ci/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/cn.srs'
	option enabled '1'
	option outbound 'direct-out'

config node 'node_selector'
	option label '节点选择'
	option type 'selector'
	list order 'direct'
	list order 'auto'
	list order 'hk_auto'
	list order 'hk'
	list order 'jp'
	list order 'us'
	list order 'manual'
	option default_selected 'auto'

config node 'youtube_selector'
	option label 'YouTube'
	option type 'selector'
	list order 'auto'
	list order 'hk_auto'
	list order 'hk'
	list order 'jp'
	list order 'us'
	list order 'manual'
	list order 'node_selector'

config node 'openai_selector'
	option label 'OpenAI'
	option type 'selector'
	list order 'auto'
	list order 'hk_auto'
	list order 'hk'
	list order 'jp'
	list order 'us'
	list order 'manual'
	list order 'node_selector'

config node 'google_selector'
	option label 'Google'
	option type 'selector'
	list order 'auto'
	list order 'hk_auto'
	list order 'hk'
	list order 'jp'
	list order 'us'
	list order 'manual'
	list order 'node_selector'

config node 'telegram_selector'
	option label 'Telegram'
	option type 'selector'
	list order 'auto'
	list order 'hk_auto'
	list order 'hk'
	list order 'jp'
	list order 'us'
	list order 'manual'
	list order 'node_selector'

config node 'tiktok_selector'
	option label 'TikTok'
	option type 'selector'
	list order 'auto'
	list order 'hk_auto'
	list order 'hk'
	list order 'jp'
	list order 'us'
	list order 'manual'
	list order 'node_selector'

config node 'netflix_selector'
	option label 'Netflix'
	option type 'selector'
	list order 'auto'
	list order 'hk_auto'
	list order 'hk'
	list order 'jp'
	list order 'us'
	list order 'manual'
	list order 'node_selector'

config node 'microsoft_selector'
	option label 'Microsoft'
	option type 'selector'
	list order 'auto'
	list order 'hk_auto'
	list order 'hk'
	list order 'jp'
	list order 'us'
	list order 'manual'
	list order 'node_selector'

config node 'apple_selector'
	option label 'Apple'
	option type 'selector'
	list order 'auto'
	list order 'hk_auto'
	list order 'hk'
	list order 'jp'
	list order 'us'
	list order 'manual'
	list order 'node_selector'
